"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var P = require('bluebird');

function IpWhitelistDeserializer(data) {
  this.perform = function () {
    return P["try"](function () {
      return {
        useIpWhitelist: data.attributes.use_ip_whitelist,
        rules: data.attributes.rules.map(function (rule) {
          var ipMinimum = rule.ip_minimum,
              ipMaximum = rule.ip_maximum,
              rest = (0, _objectWithoutProperties2["default"])(rule, ["ip_minimum", "ip_maximum"]);
          if (ipMinimum) rest.ipMinimum = ipMinimum;
          if (ipMaximum) rest.ipMaximum = ipMaximum;
          return rest;
        })
      };
    });
  };
}

module.exports = IpWhitelistDeserializer;